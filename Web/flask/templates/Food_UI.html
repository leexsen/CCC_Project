<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Result</title>
        <style type="text/css">
            body {
                height: 100%;
                margin: 0;
            }

            * {
                margin: 0;
                padding: 0;
            }

            .header {
                position:absolute;
                height: 90px;
                line-height: 90px;
                left: 0;
                right: 0;
                z-index: 1;
                -webkit-box-shadow: 0 10px 10px 0 rgba(17, 103, 166, 0.10);
                box-shadow: 0 10px 10px 0 rgba(17, 103, 166, 0.10);
                padding: 0px 0px 0px 30px;
                background: rgb(238, 238, 238);
                /* overflow: hidden; */
            }

            .title,
            .nav,
            .username-show {
                float: left;
            }
        
            .title {
                font-weight: bold;
                color:rgb(34, 87, 185);
            }
        
            .nav {
                margin-left: 60px;
            }
            
            .nav ul {
                list-style: none;
                padding-left:0;
                /* border: 1px solid gray; */
                display : inline-block;
                padding:0px;
                border-radius: 5px;
            }
        
            .nav ul li {
                display: inline;
                padding:30px;
            }
        
            .nav ul li:hover {
                background-color : #cfcfcf;
                cursor:pointer;
                border-radius: 5px;
                color: rgb(140, 133, 235);
                font-weight: bold;
            }

            .nav ul li a {
                text-decoration: none;
            }

            .section-right {
                float: right;
            }
        
            .aside {
                position: absolute;
                top: 0;
                bottom: 0;
                left: 0;
                color: #FFF;
                width: 250px;
                background: #1A293A;
                padding: 70px 0px 0px 0px;
                overflow: auto;
                text-align: center;
                
                
            }
        
            .aside ul {
                list-style: none;
                padding-left:0;
                padding-top: 0px;
                /* border: 1px solid gray; */
                display : line;
                /* padding:0px; */
                border-radius: 5px;
            }
        
            .aside ul li {
                padding:30px;
            }
        
            .aside ul li:hover{
                background-color : #403750;
                cursor:pointer;
                border-radius: 5px;
                /* color: rgb(83, 158, 146); */
                font-weight: inherit;
            }
        
            .aside ul li a {
                text-decoration: none;
                color: #C0C2C5;
            }
        
            .article {
                position: absolute;
                left: 250px;
                right: 0;
                top: 0;
                bottom: 0;
                padding: 110px 0px 0px 15px;
                overflow: auto;
                background: #f5f5f5;
            }
        
            .article h2 {
                font-weight:inherit;
                
            }

            #charts{
                padding-top: 20px;
            }

            .article chartContainer {
                padding-top: 100px;
                /* margin-top: -120px; */
                /* height: 300px; */
                width: 100%;
            }

            #mapviewDiv {
                padding-top: 115px;
                margin-top: -115px;
                width:95%;
                padding-right: 10px;
                height: 470px;
            }

            .article chartContainer h2{
                padding-top: 110px;
                margin-top: -110px;
            }
        
            .article chartContainer div{
                width: 95%;
                height: 275px;
            }
        </style>
    </head>
    <body>
        <header class="header text-size24">
            <hgroup class="title">Cluster and Cloud Computing</hgroup>
                <nav class="nav">
                    <ul>
                        <li><a href="Food_UI.html", target="_self">First</a></li>
                        <li><a href="Exercise_UI.html", target="_blank">Second</a></li>
                        <li><a href="Age_tweet.html", target="_blank">Third</a></li>
                    </ul>
                </nav>
        </header>
        <section>
            <aside class="aside"> 
                    <ul class="tab">
                        <li><a href="#mapviewDiv">Top</a></li>
                        <li><a href="#section-1">Chinese Food</a></li>
                        <li><a href="#section-2">Japanese Food</a></li>
                        <li><a href="#section-3">Korean Food</a></li>
                        <li><a href="#section-4">Indian Food</a></li>
                        <li><a href="#section-5">Australian Food</a></li>
                        <li><a href="#section-6">English Food</a></li>
                        <li><a href="#section-7">French Food</a></li>
                        <li><a href="#section-8">Greek Food</a></li>
                        <li><a href="#section-9">Itaian Food</a></li>
                        <li><a href="#section-10">Thai Food</a></li>
                    </ul>
                </aside>
                <article class="article">
                    <div id="mapviewDiv"></div>
                    <div id="charts"></div>

                    <!-- <chartContainer id="chartContainer1",class="chartContainer">
                        <h2 id="section-1",style="margin-top:0px">CHinese Food</h2>
                        <div id="chartdiv1"></div>
                    </chartContainer>
                    <chartContainer id="chartContainer2",class="chartContainer">
                        <h2 id="section-2">Chinese Food</h2>
                        <div id="chartdiv2"></div>
                    </chartContainer>
                    <chartContainer id="chartContainer3",class="chartContainer">
                        <h2 id="section-3">English Food</h2>
                        <div id="chartdiv3"></div>
                    </chartContainer>
                    <chartContainer id="chartContainer4",class="chartContainer">
                        <h2 id="section-4">French Food</h2>
                        <div id="chartdiv4"></div>
                    </chartContainer>
                    <chartContainer id="chartContainer5",class="chartContainer">
                        <h2 id="section-5">Greek Food</h2>
                        <div id="chartdiv5"></div>
                    </chartContainer>
                    <chartContainer id="chartContainer6",class="chartContainer">
                        <h2 id="section-6">Indian Food</h2>
                        <div id="chartdiv6"></div>
                    </chartContainer>
                    <chartContainer id="chartContainer7",class="chartContainer">
                        <h2 id="section-7">Itaian Food</h2>
                        <div id="chartdiv7"></div>
                    </chartContainer>
                    <chartContainer id="chartContainer8",class="chartContainer">
                        <h2 id="section-8">Japanese Food</h2>
                        <div id="chartdiv8"></div>
                    </chartContainer>
                    <chartContainer id="chartContainer9",class="chartContainer">
                        <h2 id="section-9">Thai Food</h2>
                        <div id="chartdiv9"></div>
                    </chartContainer>
                    <chartContainer id="chartContainer10",class="chartContainer">
                        <h2 id="section-10">Thai Food</h2>
                        <div id="chartdiv10"></div>
                    </chartContainer> -->
                </article>
            </section>
    <!--<footer>尾部</footer>-->
        </body>
</html>

<script>
    var count = 10;
    var html = ''
    for(var i = 1; i<=10; i++){
        var nameOfContainer = "chartContainer" + String(i);
        var nameOfId = "section-" + String(i);
        var nameOfChart = "chartdiv" + String(i);

        // needed to be passed in parameter.
        var nameOfDish = "Chinese"
        console.log(nameOfContainer);
        console.log(nameOfChart);
        html += '<chartContainer id="' + nameOfContainer + '",class="chartContainer"><h2 id="' + nameOfId + '">' + nameOfDish +'</h2><div id="' +nameOfChart+ '"></div></chartContainer>'
    }
    document.getElementById('charts').innerHTML = html;
</script>

<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<link rel="stylesheet" href="https://js.arcgis.com/4.15/esri/themes/light/main.css" />
<script src="https://js.arcgis.com/4.15/"></script>
<script>
    require(["esri/Map", "esri/views/MapView", "esri/layers/FeatureLayer"], function(Map, MapView, FeatureLayer) {
    var map = new Map({
        basemap: "gray"
    });
    var view = new MapView({
        container: "mapviewDiv", // Reference to the scene div created in step 5
        map: map, // Reference to the map object created before the scene
        zoom: 10, // Sets zoom level based on level of detail (LOD)
        center: [144.96, -37.81] // Sets center point of view using longitude,latitude
    });

    var suburbLayer = new FeatureLayer({
        url: "https://services3.arcgis.com/GLd5FI430ZgiGlSL/arcgis/rest/services/suburb/FeatureServer/0",
    });
    map.add(suburbLayer,0);
    })
</script>
<script src="https://www.amcharts.com/lib/4/core.js"></script>
<script src="https://www.amcharts.com/lib/4/charts.js"></script>
<script src="https://www.amcharts.com/lib/4/themes/dark.js"></script>
<script src="https://www.amcharts.com/lib/4/themes/dataviz.js"></script>
<script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    am4core.ready(function() {
    
    // Themes begin
    am4core.useTheme(am4themes_dataviz);
    am4core.useTheme(am4themes_animated);
    // Themes end

    // get food data

    food_jason = "";
    $.ajax({
        url: 'http://127.0.0.1:5000/food',
        type: 'GET',
        success: function (result) {
            console.log(result);
            food_jason = result;
        }
    });

    let jsonStr1 = {'country': 'china', 'stats': {'abbotsford': {'food_percent': 0.03333333333333333, 'australia': 0.4774603174603175, 'china': 0.013227513227513227, 'england': 0.032063492063492065, 'france': 0.0032804232804232803, 'greece': 0.009947089947089947, 'india': 0.014814814814814815, 'italy': 0.004656084656084656, 'japan': 0.003492063492063492, 'thailand': 0.0068783068783068784}, 'coburg': {'food_percent': 0.25, 'australia': 0.5747521246458923, 'china': 0.006940509915014164, 'england': 0.020007082152974504, 'france': 0.0016288951841359773, 'greece': 0.025743626062322948, 'india': 0.013845609065155808, 'italy': 0.05318696883852691, 'japan': 0.0020892351274787537, 'thailand': 0.0031161473087818695}, 'docklands': {'food_percent': 0.2, 'australia': 0.2173308957952468, 'china': 0.06106032906764168, 'england': 0.018208409506398536, 'france': 0.003510054844606947, 'greece': 0.0013893967093235832, 'india': 0.1009872029250457, 'italy': 0.007605118829981719, 'japan': 0.005776965265082267, 'thailand': 0.005923217550274223}, 'fitzroy': {'food_percent': 0.1, 'australia': 0.4839693326363478, 'china': 0.010280536678863913, 'england': 0.0352848928384736, 'france': 0.005227391531625719, 'greece': 0.007405471336469768, 'india': 0.0024394493814253355, 'italy': 0.005488761108207005, 'japan': 0.0026136957658128594, 'thailand': 0.0024394493814253355}, 'melbourne': {'food_percent': 0.13942307692307693, 'australia': 0.11790586102451858, 'china': 0.09031416506378369, 'england': 0.009816276447569145, 'france': 0.003913245340584997, 'greece': 0.0007959143065596604, 'india': 0.05111538546572041, 'italy': 0.005261877915588866, 'japan': 0.009108797063960557, 'thailand': 0.023855320466052043}, 'moonee ponds': {'food_percent': 0.3333333333333333, 'australia': 0.6298167217149149, 'china': 0.006994365649893142, 'england': 0.01949355611683181, 'france': 0.0017485914124732854, 'greece': 0.01217537724240658, 'india': 0.02085357165986659, 'italy': 0.04144809274010751, 'japan': 0.002137167281911793, 'thailand': 0.004080046629104332}, 'north melbourne': {'food_percent': 0.125, 'australia': 0.3617875866734314, 'china': 0.04786064603416201, 'england': 0.019237273803483848, 'france': 0.003128699475731439, 'greece': 0.0008455944529003889, 'india': 0.02354980551327583, 'italy': 0.008286825638423811, 'japan': 0.006172839506172839, 'thailand': 0.006553357009978014}, 'southbank': {'food_percent': 0.19047619047619047, 'australia': 0.24702488279841328, 'china': 0.048909123692751535, 'england': 0.026595744680851064, 'france': 0.005048683736025965, 'greece': 0.0014875586007933646, 'india': 0.038721601153984854, 'italy': 0.009962134871979805, 'japan': 0.00991705733862243, 'thailand': 0.007573025604038947}, 'st kilda': {'food_percent': 0.07407407407407407, 'australia': 0.457867985201065, 'china': 0.007676083122990215, 'england': 0.046540576052003735, 'france': 0.007883544829016978, 'greece': 0.004667888385602157, 'india': 0.023304864977006328, 'italy': 0.008851699457141869, 'japan': 0.00325023339441928, 'thailand': 0.0024895404723211507}}}
    let jsonStr2 = {'country': 'japan', 'stats': {'abbotsford': {'food_percent': 0.03333333333333333, 'australia': 0.4774603174603175, 'china': 0.013227513227513227, 'england': 0.032063492063492065, 'france': 0.0032804232804232803, 'greece': 0.009947089947089947, 'india': 0.014814814814814815, 'italy': 0.004656084656084656, 'japan': 0.003492063492063492, 'thailand': 0.0068783068783068784}, 'albert park': {'food_percent': 0.5, 'australia': 0.5444876008365701, 'china': 0.01511801613385121, 'england': 0.04326262324469674, 'france': 0.005318195398864655, 'greece': 0.022109351658201375, 'india': 0.01989841649238124, 'italy': 0.009202270690170301, 'japan': 0.003764565282342396, 'thailand': 0.0024499551837466388}, 'brunswick': {'food_percent': 0.4166666666666667, 'australia': 0.5520150285329458, 'china': 0.009676390316520752, 'england': 0.028462056498777158, 'france': 0.0034026867047105944, 'greece': 0.024279587424237054, 'india': 0.009534611703824478, 'italy': 0.030057065891610252, 'japan': 0.0021621238436181902, 'thailand': 0.0017013433523552972}, 'collingwood': {'food_percent': 0.16666666666666666, 'australia': 0.4487988599348534, 'china': 0.011095276872964169, 'england': 0.03277687296416938, 'france': 0.003562703583061889, 'greece': 0.007328990228013029, 'india': 0.004275244299674267, 'italy': 0.004377035830618893, 'japan': 0.0024429967426710096, 'thailand': 0.004885993485342019}, 'docklands': {'food_percent': 0.13333333333333333, 'australia': 0.2173308957952468, 'china': 0.06106032906764168, 'england': 0.018208409506398536, 'france': 0.003510054844606947, 'greece': 0.0013893967093235832, 'india': 0.1009872029250457, 'italy': 0.007605118829981719, 'japan': 0.005776965265082267, 'thailand': 0.005923217550274223}, 'elwood': {'food_percent': 1.0, 'australia': 0.5978628350639942, 'china': 0.0033808258874667954, 'england': 0.045158174354020766, 'france': 0.005493842067133542, 'greece': 0.005010866940352572, 'india': 0.009961361989857523, 'italy': 0.006459792320695484, 'japan': 0.0025356194156000967, 'thailand': 0.0021130161796667473}, 'fitzroy': {'food_percent': 0.2, 'australia': 0.4839693326363478, 'china': 0.010280536678863913, 'england': 0.0352848928384736, 'france': 0.005227391531625719, 'greece': 0.007405471336469768, 'india': 0.0024394493814253355, 'italy': 0.005488761108207005, 'japan': 0.0026136957658128594, 'thailand': 0.0024394493814253355}, 'fitzroy north': {'food_percent': 1.0, 'australia': 0.621779508687837, 'china': 0.004119233073696825, 'england': 0.03984421809466747, 'france': 0.0035200718993409225, 'greece': 0.009961054523666867, 'india': 0.002920910724985021, 'italy': 0.021794487717195925, 'japan': 0.0026962252846015576, 'thailand': 0.0017974835230677051}, 'melbourne': {'food_percent': 0.23076923076923078, 'australia': 0.11790586102451858, 'china': 0.09031416506378369, 'england': 0.009816276447569145, 'france': 0.003913245340584997, 'greece': 0.0007959143065596604, 'india': 0.05111538546572041, 'italy': 0.005261877915588866, 'japan': 0.009108797063960557, 'thailand': 0.023855320466052043}, 'moonee ponds': {'food_percent': 0.3333333333333333, 'australia': 0.6298167217149149, 'china': 0.006994365649893142, 'england': 0.01949355611683181, 'france': 0.0017485914124732854, 'greece': 0.01217537724240658, 'india': 0.02085357165986659, 'italy': 0.04144809274010751, 'japan': 0.002137167281911793, 'thailand': 0.004080046629104332}, 'port melbourne': {'food_percent': 0.6666666666666666, 'australia': 0.5767207737118941, 'china': 0.00412872575080595, 'england': 0.048922572252700636, 'france': 0.00509020982976076, 'greece': 0.018381313274136078, 'india': 0.005768904473728862, 'italy': 0.008992704032577343, 'japan': 0.0021491997058989878, 'thailand': 0.0018664102709122787}, 'south melbourne': {'food_percent': 0.2222222222222222, 'australia': 0.49819720959398023, 'china': 0.012306004075873962, 'england': 0.04420755604326697, 'france': 0.0038407273867377334, 'greece': 0.011208653393948895, 'india': 0.014500705439724095, 'italy': 0.005878664367455714, 'japan': 0.004389402727700266, 'thailand': 0.004546167110832419}, 'southbank': {'food_percent': 0.2857142857142857, 'australia': 0.24702488279841328, 'china': 0.048909123692751535, 'england': 0.026595744680851064, 'france': 0.005048683736025965, 'greece': 0.0014875586007933646, 'india': 0.038721601153984854, 'italy': 0.009962134871979805, 'japan': 0.00991705733862243, 'thailand': 0.007573025604038947}, 'st kilda': {'food_percent': 0.18518518518518517, 'australia': 0.457867985201065, 'china': 0.007676083122990215, 'england': 0.046540576052003735, 'france': 0.007883544829016978, 'greece': 0.004667888385602157, 'india': 0.023304864977006328, 'italy': 0.008851699457141869, 'japan': 0.00325023339441928, 'thailand': 0.0024895404723211507}}}
    let jsonStr3 = {'country': 'korea', 'stats': {'abbotsford': {'food_percent': 0.03333333333333333, 'australia': 0.4774603174603175, 'china': 0.013227513227513227, 'england': 0.032063492063492065, 'france': 0.0032804232804232803, 'greece': 0.009947089947089947, 'india': 0.014814814814814815, 'italy': 0.004656084656084656, 'japan': 0.003492063492063492, 'thailand': 0.0068783068783068784}, 'brunswick east': {'food_percent': 0.125, 'australia': 0.5397786095404954, 'china': 0.008202596161503544, 'england': 0.032252926654455685, 'france': 0.002628016245918611, 'greece': 0.014892092060205463, 'india': 0.007804411881818906, 'italy': 0.035836585171617426, 'japan': 0.004061479652783308, 'thailand': 0.003822569084972525}, 'carlton': {'food_percent': 0.02702702702702703, 'australia': 0.23914838946499037, 'china': 0.0812150133064146, 'england': 0.015692392401578416, 'france': 0.0031201248049922, 'greece': 0.0016059465908048087, 'india': 0.022299715518032486, 'italy': 0.01170046801872075, 'japan': 0.004404882077636047, 'thailand': 0.006790859869688905}, 'docklands': {'food_percent': 0.06666666666666667, 'australia': 0.2173308957952468, 'china': 0.06106032906764168, 'england': 0.018208409506398536, 'france': 0.003510054844606947, 'greece': 0.0013893967093235832, 'india': 0.1009872029250457, 'italy': 0.007605118829981719, 'japan': 0.005776965265082267, 'thailand': 0.005923217550274223}, 'melbourne': {'food_percent': 0.1971153846153846, 'australia': 0.11790586102451858, 'china': 0.09031416506378369, 'england': 0.009816276447569145, 'france': 0.003913245340584997, 'greece': 0.0007959143065596604, 'india': 0.05111538546572041, 'italy': 0.005261877915588866, 'japan': 0.009108797063960557, 'thailand': 0.023855320466052043}, 'north melbourne': {'food_percent': 0.5, 'australia': 0.3617875866734314, 'china': 0.04786064603416201, 'england': 0.019237273803483848, 'france': 0.003128699475731439, 'greece': 0.0008455944529003889, 'india': 0.02354980551327583, 'italy': 0.008286825638423811, 'japan': 0.006172839506172839, 'thailand': 0.006553357009978014}, 'parkville': {'food_percent': 1.0, 'australia': 0.44937167713871434, 'china': 0.03274528757854036, 'england': 0.02416626389560174, 'france': 0.0035041082648622525, 'greece': 0.0026582890285161915, 'india': 0.01933301111648139, 'italy': 0.007974867085548574, 'japan': 0.004108264862252296, 'thailand': 0.003141614306428226}, 'south melbourne': {'food_percent': 0.3333333333333333, 'australia': 0.49819720959398023, 'china': 0.012306004075873962, 'england': 0.04420755604326697, 'france': 0.0038407273867377334, 'greece': 0.011208653393948895, 'india': 0.014500705439724095, 'italy': 0.005878664367455714, 'japan': 0.004389402727700266, 'thailand': 0.004546167110832419}, 'st kilda': {'food_percent': 0.037037037037037035, 'australia': 0.457867985201065, 'china': 0.007676083122990215, 'england': 0.046540576052003735, 'france': 0.007883544829016978, 'greece': 0.004667888385602157, 'india': 0.023304864977006328, 'italy': 0.008851699457141869, 'japan': 0.00325023339441928, 'thailand': 0.0024895404723211507}}}
    let jsonStr4 = jsonStr5 = jsonStr6 = jsonStr7 = jsonStr8 = jsonStr9 = jsonStr10 = jsonStr2;
    
    function getDataPoint(jsonStr){
        var data = []
        var countryDish = jsonStr.country;
        for(var state in jsonStr.stats){
            // console.log(state);
            var local = jsonStr['stats'][state].australia;
            var percent = jsonStr['stats'][state].food_percent;
            data.push({local_percent:local, food_percent:percent});
    }
    return data;
    }


    // console.log(jsonStr.stats.food_percent)
    // console.log(chart.data);
    
    function createXYChart(data, divName){
        var chart = am4core.create(divName, am4charts.XYChart);
        chart.data = data;
        // Create axes
        var XAxis = chart.xAxes.push(new am4charts.ValueAxis());
        // XAxis.renderer.minGridDistance = 3;
        
        var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());
        // valueAxis.renderer.minGridDistance=1;
        
        // Create series
        var series = chart.series.push(new am4charts.ColumnSeries());
        series.dataFields.valueY = "food_percent";
        series.dataFields.valueX = "local_percent";

        var bullet = series.bullets.push(new am4charts.CircleBullet());
        bullet.circle.radius = 5;
        bullet.circle.fill = am4core.color('blue');
        
        series.tooltip.pointerOrientation = "vertical";
        
        chart.cursor = new am4charts.XYCursor();
        chart.cursor.snapToSeries = series;
        chart.cursor.xAxis = XAxis;
        
        // chart.scrollbarY = new am4core.Scrollbar();
        chart.scrollbarX = new am4core.Scrollbar();
    }
    // var i = 1;
    // for(var i = 0; i< 10; i++){
    //     dataJson = "jsonStr" + String(i);
    //     createXYChart(data=getDataPoint(dataJson, "chartdiv"+String(i)));
        
    // }
    createXYChart(getDataPoint(jsonStr1), "chartdiv1");
    createXYChart(getDataPoint(jsonStr2), "chartdiv2");
    createXYChart(getDataPoint(jsonStr3), "chartdiv3");
    createXYChart(getDataPoint(jsonStr4), "chartdiv4");
    createXYChart(getDataPoint(jsonStr5), "chartdiv5");
    createXYChart(getDataPoint(jsonStr6), "chartdiv6");
    createXYChart(getDataPoint(jsonStr7), "chartdiv7");
    createXYChart(getDataPoint(jsonStr8), "chartdiv8");
    createXYChart(getDataPoint(jsonStr9), "chartdiv9");
    createXYChart(getDataPoint(jsonStr10), "chartdiv10");

    }); // end am4core.ready()

</script>